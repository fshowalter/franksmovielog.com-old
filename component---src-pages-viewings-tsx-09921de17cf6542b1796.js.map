{"version":3,"sources":["webpack:///./node_modules/react-slider/es/components/ReactSlider/ReactSlider.js","webpack:///./src/components/FilterControl.tsx","webpack:///./src/components/Label.tsx","webpack:///./src/components/RangeFilter.tsx","webpack:///./src/components/SelectInput.tsx","webpack:///./src/components/SelectFilter.tsx","webpack:///./src/components/Sorter.tsx","webpack:///./src/components/TextFilter.tsx","webpack:///./src/pages/viewings.tsx","webpack:///./node_modules/gatsby/node_modules/core-js/modules/es6.string.starts-with.js","webpack:///./node_modules/gatsby/node_modules/core-js/modules/es7.object.values.js","webpack:///./node_modules/gatsby/node_modules/core-js/modules/_object-to-array.js"],"names":["_jsxFileName","_extends","Object","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","apply","this","pauseEvent","e","stopPropagation","preventDefault","ensureArray","x","Array","isArray","undoEnsureArray","addHandlers","eventMap","keys","forEach","document","addEventListener","_React$Component","subClass","superClass","ReactSlider","_props","_this","onKeyUp","onEnd","onMouseUp","getMouseEventMap","onTouchEnd","getTouchEventMap","onBlur","setState","index","getKeyDownEventMap","onMouseMove","position","getMousePosition","diffPosition","getDiffPosition","newValue","getValueFromPosition","move","onTouchMove","touches","getTouchPosition","isScrolling","diffMainDir","startPosition","diffScrollDir","Math","abs","onKeyDown","ctrlKey","shiftKey","altKey","moveDownByStep","moveUpByStep","props","min","max","pageFn","step","onSliderMouseDown","disabled","button","hasMoved","snapDragDisabled","forceValueFromPosition","start","fireChangeEvent","onSliderClick","valueAtPos","trimAlignValue","calcValue","calcOffsetFromPosition","createOnKeyDown","createOnMouseDown","createOnTouchStart","undefined","handleResize","resizeTimeout","window","setTimeout","pendingResizeTimeouts","shift","resize","push","renderThumb","style","className","thumbClassName","state","thumbActiveClassName","r","orientation","value","ariaLabel","valueNow","ariaValuetext","renderTrack","offsetFrom","offsetTo","trackClassName","buildTrackStyle","upperBound","defaultValue","tempArray","slice","zIndices","sliderLength","create","constructor","__proto__","_proto","componentDidMount","UNSAFE_componentWillReceiveProps","newProps","componentWillUnmount","clearPendingResizeTimeouts","removeEventListener","removeHandlers","getValue","getClosestIndex","pixelOffset","minDist","Number","MAX_VALUE","closestIndex","l","offset","calcOffset","dist","axisKey","orthogonalAxisKey","touch","keydown","keyup","focusout","mousemove","mouseup","touchmove","touchend","diffValue","thumbSize","startValue","invert","slider","thumb","thumb0","sizeKey","sliderRect","getBoundingClientRect","sliderSize","sliderMax","posMaxKey","sliderMin","posMinKey","replace","toLowerCase","range","callback","nextValue","minDistance","bind","nextTimeout","clearTimeout","thumbRef","focus","splice","indexOf","prevState","_this$state","oldValue","_this$props","pearling","valueBefore","valueAfter","pushSucceeding","padding","trimSucceeding","pushPreceding","trimPreceding","alignValue","val","trimValue","trimmed","valModStep","parseFloat","toFixed","event","buildThumbStyle","touchAction","willChange","zIndex","obj","renderThumbs","styles","res","_i","renderTracks","tracks","lastIndex","render","_this2","withTracks","thumbs","createElement","ref","onMouseDown","onClick","Component","displayName","defaultProps","__self","__source","fileName","lineNumber","columnNumber","RangeFilterWrap","StyledSlider","StyledThumb","Thumb","StyledTrack","Track","rangeInputMixin","RangeInputMin","RangeInputMax","RangeFilter","label","handleChange","initialState","React","useState","valuesAreValid","values","FilterControl","Label","htmlFor","onAfterChange","type","onChange","newState","parseInt","SelectFilter","children","options","map","optionName","optionValue","SelectInput","collator","Intl","Collator","sensitivity","ignorePunctuation","numeric","sortStringAsc","a","b","sortStringDesc","Sorter","collection","comparer","sortedCollection","sort","name","TextInput","TextInputWrap","delay","func","wait","args","TextFilter","result","timeout","later","placeholder","debouncedHandleChange","context","Container","Heading","Content","ViewingYearSelectFilter","viewings","yearOptions","Set","viewing","date","substring","year","startsWith","VenueFilter","venueOptions","venue","TitleFilter","str","regex","RegExp","test","movie","title","ViewingSorter","sortViewings","Title","compare","sortTitle","matchers","FilterPanel","heading","onFilterChange","filterId","matcher","match","some","filterMatcher","ReleaseYearFilter","sortedViewings","releaseYears","minYear","maxYear","PanelHeaderHeader","PanelHeaderHeading","PanelHeaderSlug","PanelHeader","slug","List","ListItem","ViewingListItem","memo","node","display","Slug","moment","format","ColumnWrap","Column1","Column2","TwoColumns","Viewings","data","allViewing","nodes","ids","sequence","Layout","id","imdbId","query","$export","toLength","$startsWith","P","F","searchString","that","search","String","$values","S","it","DESCRIPTORS","getKeys","toIObject","isEnum","f","module","exports","isEntries","O"],"mappings":"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","file":"component---src-pages-viewings-tsx-09921de17cf6542b1796.js","sourcesContent":["import \"core-js/modules/es6.array.index-of\";\nimport \"core-js/modules/es6.function.bind\";\nimport \"core-js/modules/es6.regexp.replace\";\nimport \"core-js/modules/es6.number.constructor\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.array.iterator\";\nimport \"core-js/modules/es6.object.to-string\";\nimport \"core-js/modules/es6.object.keys\";\nimport \"core-js/modules/es6.array.for-each\";\nimport \"core-js/modules/es6.array.is-array\";\nimport \"core-js/modules/es6.object.create\";\nimport \"core-js/modules/es6.object.assign\";\nvar _jsxFileName = \"/Users/brians/git/react-slider/src/components/ReactSlider/ReactSlider.jsx\";\n\nfunction _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nfunction _inheritsLoose(subClass, superClass) {\n  subClass.prototype = Object.create(superClass.prototype);\n  subClass.prototype.constructor = subClass;\n  subClass.__proto__ = superClass;\n}\n\nimport React from 'react';\n\n/**\n * To prevent text selection while dragging.\n * http://stackoverflow.com/questions/5429827/how-can-i-prevent-text-element-selection-with-cursor-drag\n */\nfunction pauseEvent(e) {\n  if (e && e.stopPropagation) {\n    e.stopPropagation();\n  }\n\n  if (e && e.preventDefault) {\n    e.preventDefault();\n  }\n\n  return false;\n}\n\nfunction stopPropagation(e) {\n  if (e.stopPropagation) {\n    e.stopPropagation();\n  }\n}\n\nfunction ensureArray(x) {\n  if (x == null) {\n    return [];\n  }\n\n  return Array.isArray(x) ? x : [x];\n}\n\nfunction undoEnsureArray(x) {\n  return x !== null && x.length === 1 ? x[0] : x;\n}\n\nfunction trimSucceeding(length, nextValue, minDistance, max) {\n  for (var i = 0; i < length; i += 1) {\n    var padding = max - i * minDistance;\n\n    if (nextValue[length - 1 - i] > padding) {\n      // eslint-disable-next-line no-param-reassign\n      nextValue[length - 1 - i] = padding;\n    }\n  }\n}\n\nfunction trimPreceding(length, nextValue, minDistance, min) {\n  for (var i = 0; i < length; i += 1) {\n    var padding = min + i * minDistance;\n\n    if (nextValue[i] < padding) {\n      // eslint-disable-next-line no-param-reassign\n      nextValue[i] = padding;\n    }\n  }\n}\n\nfunction addHandlers(eventMap) {\n  Object.keys(eventMap).forEach(function (key) {\n    if (typeof document !== 'undefined') {\n      document.addEventListener(key, eventMap[key], false);\n    }\n  });\n}\n\nfunction removeHandlers(eventMap) {\n  Object.keys(eventMap).forEach(function (key) {\n    if (typeof document !== 'undefined') {\n      document.removeEventListener(key, eventMap[key], false);\n    }\n  });\n}\n\nvar ReactSlider = /*#__PURE__*/function (_React$Component) {\n  _inheritsLoose(ReactSlider, _React$Component);\n\n  function ReactSlider(_props) {\n    var _this;\n\n    _this = _React$Component.call(this, _props) || this;\n\n    _this.onKeyUp = function () {\n      _this.onEnd();\n    };\n\n    _this.onMouseUp = function () {\n      _this.onEnd(_this.getMouseEventMap());\n    };\n\n    _this.onTouchEnd = function () {\n      _this.onEnd(_this.getTouchEventMap());\n    };\n\n    _this.onBlur = function () {\n      _this.setState({\n        index: -1\n      }, _this.onEnd(_this.getKeyDownEventMap()));\n    };\n\n    _this.onMouseMove = function (e) {\n      var position = _this.getMousePosition(e);\n\n      var diffPosition = _this.getDiffPosition(position[0]);\n\n      var newValue = _this.getValueFromPosition(diffPosition);\n\n      _this.move(newValue);\n    };\n\n    _this.onTouchMove = function (e) {\n      if (e.touches.length > 1) {\n        return;\n      }\n\n      var position = _this.getTouchPosition(e);\n\n      if (typeof _this.isScrolling === 'undefined') {\n        var diffMainDir = position[0] - _this.startPosition[0];\n        var diffScrollDir = position[1] - _this.startPosition[1];\n        _this.isScrolling = Math.abs(diffScrollDir) > Math.abs(diffMainDir);\n      }\n\n      if (_this.isScrolling) {\n        _this.setState({\n          index: -1\n        });\n\n        return;\n      }\n\n      var diffPosition = _this.getDiffPosition(position[0]);\n\n      var newValue = _this.getValueFromPosition(diffPosition);\n\n      _this.move(newValue);\n    };\n\n    _this.onKeyDown = function (e) {\n      if (e.ctrlKey || e.shiftKey || e.altKey) {\n        return;\n      }\n\n      switch (e.key) {\n        case 'ArrowLeft':\n        case 'ArrowDown':\n        case 'Left':\n        case 'Down':\n          e.preventDefault();\n\n          _this.moveDownByStep();\n\n          break;\n\n        case 'ArrowRight':\n        case 'ArrowUp':\n        case 'Right':\n        case 'Up':\n          e.preventDefault();\n\n          _this.moveUpByStep();\n\n          break;\n\n        case 'Home':\n          e.preventDefault();\n\n          _this.move(_this.props.min);\n\n          break;\n\n        case 'End':\n          e.preventDefault();\n\n          _this.move(_this.props.max);\n\n          break;\n\n        case 'PageDown':\n          e.preventDefault();\n\n          _this.moveDownByStep(_this.props.pageFn(_this.props.step));\n\n          break;\n\n        case 'PageUp':\n          e.preventDefault();\n\n          _this.moveUpByStep(_this.props.pageFn(_this.props.step));\n\n          break;\n\n        default:\n      }\n    };\n\n    _this.onSliderMouseDown = function (e) {\n      // do nothing if disabled or right click\n      if (_this.props.disabled || e.button === 2) {\n        return;\n      }\n\n      _this.hasMoved = false;\n\n      if (!_this.props.snapDragDisabled) {\n        var position = _this.getMousePosition(e);\n\n        _this.forceValueFromPosition(position[0], function (i) {\n          _this.start(i, position[0]);\n\n          _this.fireChangeEvent('onChange');\n\n          addHandlers(_this.getMouseEventMap());\n        });\n      }\n\n      pauseEvent(e);\n    };\n\n    _this.onSliderClick = function (e) {\n      if (_this.props.disabled) {\n        return;\n      }\n\n      if (_this.props.onSliderClick && !_this.hasMoved) {\n        var position = _this.getMousePosition(e);\n\n        var valueAtPos = _this.trimAlignValue(_this.calcValue(_this.calcOffsetFromPosition(position[0])));\n\n        _this.props.onSliderClick(valueAtPos);\n      }\n    };\n\n    _this.createOnKeyDown = function (i) {\n      return function (e) {\n        if (_this.props.disabled) {\n          return;\n        }\n\n        _this.start(i);\n\n        addHandlers(_this.getKeyDownEventMap());\n        pauseEvent(e);\n      };\n    };\n\n    _this.createOnMouseDown = function (i) {\n      return function (e) {\n        // do nothing if disabled or right click\n        if (_this.props.disabled || e.button === 2) {\n          return;\n        }\n\n        var position = _this.getMousePosition(e);\n\n        _this.start(i, position[0]);\n\n        addHandlers(_this.getMouseEventMap());\n        pauseEvent(e);\n      };\n    };\n\n    _this.createOnTouchStart = function (i) {\n      return function (e) {\n        if (_this.props.disabled || e.touches.length > 1) {\n          return;\n        }\n\n        var position = _this.getTouchPosition(e);\n\n        _this.startPosition = position; // don't know yet if the user is trying to scroll\n\n        _this.isScrolling = undefined;\n\n        _this.start(i, position[0]);\n\n        addHandlers(_this.getTouchEventMap());\n        stopPropagation(e);\n      };\n    };\n\n    _this.handleResize = function () {\n      // setTimeout of 0 gives element enough time to have assumed its new size if\n      // it is being resized\n      var resizeTimeout = window.setTimeout(function () {\n        // drop this timeout from pendingResizeTimeouts to reduce memory usage\n        _this.pendingResizeTimeouts.shift();\n\n        _this.resize();\n      }, 0);\n\n      _this.pendingResizeTimeouts.push(resizeTimeout);\n    };\n\n    _this.renderThumb = function (style, i) {\n      var className = _this.props.thumbClassName + \" \" + _this.props.thumbClassName + \"-\" + i + \" \" + (_this.state.index === i ? _this.props.thumbActiveClassName : '');\n      var props = {\n        'ref': function ref(r) {\n          _this[\"thumb\" + i] = r;\n        },\n        'key': _this.props.thumbClassName + \"-\" + i,\n        className: className,\n        style: style,\n        'onMouseDown': _this.createOnMouseDown(i),\n        'onTouchStart': _this.createOnTouchStart(i),\n        'onFocus': _this.createOnKeyDown(i),\n        'tabIndex': 0,\n        'role': 'slider',\n        'aria-orientation': _this.props.orientation,\n        'aria-valuenow': _this.state.value[i],\n        'aria-valuemin': _this.props.min,\n        'aria-valuemax': _this.props.max,\n        'aria-label': Array.isArray(_this.props.ariaLabel) ? _this.props.ariaLabel[i] : _this.props.ariaLabel\n      };\n      var state = {\n        index: i,\n        value: undoEnsureArray(_this.state.value),\n        valueNow: _this.state.value[i]\n      };\n\n      if (_this.props.ariaValuetext) {\n        props['aria-valuetext'] = typeof _this.props.ariaValuetext === 'string' ? _this.props.ariaValuetext : _this.props.ariaValuetext(state);\n      }\n\n      return _this.props.renderThumb(props, state);\n    };\n\n    _this.renderTrack = function (i, offsetFrom, offsetTo) {\n      var props = {\n        key: _this.props.trackClassName + \"-\" + i,\n        className: _this.props.trackClassName + \" \" + _this.props.trackClassName + \"-\" + i,\n        style: _this.buildTrackStyle(offsetFrom, _this.state.upperBound - offsetTo)\n      };\n      var state = {\n        index: i,\n        value: undoEnsureArray(_this.state.value)\n      };\n      return _this.props.renderTrack(props, state);\n    };\n\n    var value = ensureArray(_props.value);\n\n    if (!value.length) {\n      value = ensureArray(_props.defaultValue);\n    } // reused throughout the component to store results of iterations over `value`\n\n\n    _this.tempArray = value.slice(); // array for storing resize timeouts ids\n\n    _this.pendingResizeTimeouts = [];\n    var zIndices = [];\n\n    for (var i = 0; i < value.length; i += 1) {\n      value[i] = _this.trimAlignValue(value[i], _props);\n      zIndices.push(i);\n    }\n\n    _this.state = {\n      index: -1,\n      upperBound: 0,\n      sliderLength: 0,\n      value: value,\n      zIndices: zIndices\n    };\n    return _this;\n  }\n\n  var _proto = ReactSlider.prototype;\n\n  _proto.componentDidMount = function componentDidMount() {\n    if (typeof window !== 'undefined') {\n      window.addEventListener('resize', this.handleResize);\n      this.resize();\n    }\n  } // Keep the internal `value` consistent with an outside `value` if present.\n  // This basically allows the slider to be a controlled component.\n  ;\n\n  _proto.UNSAFE_componentWillReceiveProps = function UNSAFE_componentWillReceiveProps(newProps) {\n    var value = ensureArray(newProps.value);\n\n    if (!value.length) {\n      // eslint-disable-next-line prefer-destructuring\n      value = this.state.value;\n    } // ensure the array keeps the same size as `value`\n\n\n    this.tempArray = value.slice();\n\n    for (var i = 0; i < value.length; i += 1) {\n      this.state.value[i] = this.trimAlignValue(value[i], newProps);\n    }\n\n    if (this.state.value.length > value.length) {\n      this.state.value.length = value.length;\n    } // If an upperBound has not yet been determined (due to the component being hidden\n    // during the mount event, or during the last resize), then calculate it now\n\n\n    if (this.state.upperBound === 0) {\n      this.resize();\n    }\n  };\n\n  _proto.componentWillUnmount = function componentWillUnmount() {\n    this.clearPendingResizeTimeouts();\n\n    if (typeof window !== 'undefined') {\n      window.removeEventListener('resize', this.handleResize);\n    }\n  };\n\n  _proto.onEnd = function onEnd(eventMap) {\n    if (eventMap) {\n      removeHandlers(eventMap);\n    }\n\n    if (this.hasMoved) {\n      this.fireChangeEvent('onAfterChange');\n    }\n\n    this.hasMoved = false;\n  };\n\n  _proto.getValue = function getValue() {\n    return undoEnsureArray(this.state.value);\n  };\n\n  _proto.getClosestIndex = function getClosestIndex(pixelOffset) {\n    var minDist = Number.MAX_VALUE;\n    var closestIndex = -1;\n    var value = this.state.value;\n    var l = value.length;\n\n    for (var i = 0; i < l; i += 1) {\n      var offset = this.calcOffset(value[i]);\n      var dist = Math.abs(pixelOffset - offset);\n\n      if (dist < minDist) {\n        minDist = dist;\n        closestIndex = i;\n      }\n    }\n\n    return closestIndex;\n  };\n\n  _proto.getMousePosition = function getMousePosition(e) {\n    return [e[\"page\" + this.axisKey()], e[\"page\" + this.orthogonalAxisKey()]];\n  };\n\n  _proto.getTouchPosition = function getTouchPosition(e) {\n    var touch = e.touches[0];\n    return [touch[\"page\" + this.axisKey()], touch[\"page\" + this.orthogonalAxisKey()]];\n  };\n\n  _proto.getKeyDownEventMap = function getKeyDownEventMap() {\n    return {\n      keydown: this.onKeyDown,\n      keyup: this.onKeyUp,\n      focusout: this.onBlur\n    };\n  };\n\n  _proto.getMouseEventMap = function getMouseEventMap() {\n    return {\n      mousemove: this.onMouseMove,\n      mouseup: this.onMouseUp\n    };\n  };\n\n  _proto.getTouchEventMap = function getTouchEventMap() {\n    return {\n      touchmove: this.onTouchMove,\n      touchend: this.onTouchEnd\n    };\n  };\n\n  _proto.getValueFromPosition = function getValueFromPosition(position) {\n    var diffValue = position / (this.state.sliderLength - this.state.thumbSize) * (this.props.max - this.props.min);\n    return this.trimAlignValue(this.state.startValue + diffValue);\n  };\n\n  _proto.getDiffPosition = function getDiffPosition(position) {\n    var diffPosition = position - this.state.startPosition;\n\n    if (this.props.invert) {\n      diffPosition *= -1;\n    }\n\n    return diffPosition;\n  } // create the `keydown` handler for the i-th thumb\n  ;\n\n  _proto.resize = function resize() {\n    var slider = this.slider,\n        thumb = this.thumb0;\n    var sizeKey = this.sizeKey(); // For the slider size, we want to use the client width/height, excluding any borders\n\n    var sliderRect = slider.getBoundingClientRect();\n    var sliderSize = slider[sizeKey];\n    var sliderMax = sliderRect[this.posMaxKey()];\n    var sliderMin = sliderRect[this.posMinKey()]; // For the thumb size, we want to use the outer width/height, including any borders\n\n    var thumbRect = thumb.getBoundingClientRect();\n    var thumbSize = thumbRect[sizeKey.replace('client', '').toLowerCase()];\n    this.setState({\n      upperBound: sliderSize - thumbSize,\n      sliderLength: Math.abs(sliderMax - sliderMin),\n      thumbSize: thumbSize\n    });\n  } // calculates the offset of a thumb in pixels based on its value.\n  ;\n\n  _proto.calcOffset = function calcOffset(value) {\n    var range = this.props.max - this.props.min;\n\n    if (range === 0) {\n      return 0;\n    }\n\n    var ratio = (value - this.props.min) / range;\n    return ratio * this.state.upperBound;\n  } // calculates the value corresponding to a given pixel offset, i.e. the inverse of `calcOffset`.\n  ;\n\n  _proto.calcValue = function calcValue(offset) {\n    var ratio = offset / this.state.upperBound;\n    return ratio * (this.props.max - this.props.min) + this.props.min;\n  };\n\n  _proto.calcOffsetFromPosition = function calcOffsetFromPosition(position) {\n    var slider = this.slider;\n    var sliderRect = slider.getBoundingClientRect();\n    var sliderMax = sliderRect[this.posMaxKey()];\n    var sliderMin = sliderRect[this.posMinKey()]; // The `position` value passed in is the mouse position based on the window height.\n    // The slider bounding rect is based on the viewport, so we must add the window scroll\n    // offset to normalize the values.\n\n    var windowOffset = window[\"page\" + this.axisKey() + \"Offset\"];\n    var sliderStart = windowOffset + (this.props.invert ? sliderMax : sliderMin);\n    var pixelOffset = position - sliderStart;\n\n    if (this.props.invert) {\n      pixelOffset = this.state.sliderLength - pixelOffset;\n    }\n\n    pixelOffset -= this.state.thumbSize / 2;\n    return pixelOffset;\n  } // Snaps the nearest thumb to the value corresponding to `position`\n  // and calls `callback` with that thumb's index.\n  ;\n\n  _proto.forceValueFromPosition = function forceValueFromPosition(position, callback) {\n    var pixelOffset = this.calcOffsetFromPosition(position);\n    var closestIndex = this.getClosestIndex(pixelOffset);\n    var nextValue = this.trimAlignValue(this.calcValue(pixelOffset)); // Clone this.state.value since we'll modify it temporarily\n    // eslint-disable-next-line zillow/react/no-access-state-in-setstate\n\n    var value = this.state.value.slice();\n    value[closestIndex] = nextValue; // Prevents the slider from shrinking below `props.minDistance`\n\n    for (var i = 0; i < value.length - 1; i += 1) {\n      if (value[i + 1] - value[i] < this.props.minDistance) {\n        return;\n      }\n    }\n\n    this.setState({\n      value: value\n    }, callback.bind(this, closestIndex));\n  } // clear all pending timeouts to avoid error messages after unmounting\n  ;\n\n  _proto.clearPendingResizeTimeouts = function clearPendingResizeTimeouts() {\n    do {\n      var nextTimeout = this.pendingResizeTimeouts.shift();\n      clearTimeout(nextTimeout);\n    } while (this.pendingResizeTimeouts.length);\n  };\n\n  _proto.start = function start(i, position) {\n    var thumbRef = this[\"thumb\" + i];\n\n    if (thumbRef) {\n      thumbRef.focus();\n    }\n\n    this.hasMoved = false;\n    var zIndices = this.state.zIndices; // remove wherever the element is\n\n    zIndices.splice(zIndices.indexOf(i), 1); // add to end\n\n    zIndices.push(i);\n    this.setState(function (prevState) {\n      return {\n        startValue: prevState.value[i],\n        startPosition: position !== undefined ? position : prevState.startPosition,\n        index: i,\n        zIndices: zIndices\n      };\n    });\n  };\n\n  _proto.moveUpByStep = function moveUpByStep(step) {\n    if (step === void 0) {\n      step = this.props.step;\n    }\n\n    var oldValue = this.state.value[this.state.index];\n    var newValue = oldValue + step;\n    this.move(Math.min(newValue, this.props.max));\n  };\n\n  _proto.moveDownByStep = function moveDownByStep(step) {\n    if (step === void 0) {\n      step = this.props.step;\n    }\n\n    var oldValue = this.state.value[this.state.index];\n    var newValue = oldValue - step;\n    this.move(Math.max(newValue, this.props.min));\n  };\n\n  _proto.move = function move(newValue) {\n    var _this$state = this.state,\n        index = _this$state.index,\n        value = _this$state.value;\n    var length = value.length; // Short circuit if the value is not changing\n\n    var oldValue = value[index];\n\n    if (newValue === oldValue) {\n      return;\n    } // Trigger only before the first movement\n\n\n    if (!this.hasMoved) {\n      this.fireChangeEvent('onBeforeChange');\n    }\n\n    this.hasMoved = true; // if \"pearling\" (= thumbs pushing each other) is disabled,\n    // prevent the thumb from getting closer than `minDistance` to the previous or next thumb.\n\n    var _this$props = this.props,\n        pearling = _this$props.pearling,\n        max = _this$props.max,\n        min = _this$props.min,\n        minDistance = _this$props.minDistance;\n\n    if (!pearling) {\n      if (index > 0) {\n        var valueBefore = value[index - 1];\n\n        if (newValue < valueBefore + minDistance) {\n          // eslint-disable-next-line no-param-reassign\n          newValue = valueBefore + minDistance;\n        }\n      }\n\n      if (index < length - 1) {\n        var valueAfter = value[index + 1];\n\n        if (newValue > valueAfter - minDistance) {\n          // eslint-disable-next-line no-param-reassign\n          newValue = valueAfter - minDistance;\n        }\n      }\n    }\n\n    value[index] = newValue; // if \"pearling\" is enabled, let the current thumb push the pre- and succeeding thumbs.\n\n    if (pearling && length > 1) {\n      if (newValue > oldValue) {\n        this.pushSucceeding(value, minDistance, index);\n        trimSucceeding(length, value, minDistance, max);\n      } else if (newValue < oldValue) {\n        this.pushPreceding(value, minDistance, index);\n        trimPreceding(length, value, minDistance, min);\n      }\n    } // Normally you would use `shouldComponentUpdate`,\n    // but since the slider is a low-level component,\n    // the extra complexity might be worth the extra performance.\n\n\n    this.setState({\n      value: value\n    }, this.fireChangeEvent.bind(this, 'onChange'));\n  };\n\n  _proto.pushSucceeding = function pushSucceeding(value, minDistance, index) {\n    var i;\n    var padding;\n\n    for (i = index, padding = value[i] + minDistance; value[i + 1] !== null && padding > value[i + 1]; i += 1, padding = value[i] + minDistance) {\n      // eslint-disable-next-line no-param-reassign\n      value[i + 1] = this.alignValue(padding);\n    }\n  };\n\n  _proto.pushPreceding = function pushPreceding(value, minDistance, index) {\n    for (var i = index, padding = value[i] - minDistance; value[i - 1] !== null && padding < value[i - 1]; i -= 1, padding = value[i] - minDistance) {\n      // eslint-disable-next-line no-param-reassign\n      value[i - 1] = this.alignValue(padding);\n    }\n  };\n\n  _proto.axisKey = function axisKey() {\n    if (this.props.orientation === 'vertical') {\n      return 'Y';\n    } // Defaults to 'horizontal';\n\n\n    return 'X';\n  };\n\n  _proto.orthogonalAxisKey = function orthogonalAxisKey() {\n    if (this.props.orientation === 'vertical') {\n      return 'X';\n    } // Defaults to 'horizontal'\n\n\n    return 'Y';\n  };\n\n  _proto.posMinKey = function posMinKey() {\n    if (this.props.orientation === 'vertical') {\n      return this.props.invert ? 'bottom' : 'top';\n    } // Defaults to 'horizontal'\n\n\n    return this.props.invert ? 'right' : 'left';\n  };\n\n  _proto.posMaxKey = function posMaxKey() {\n    if (this.props.orientation === 'vertical') {\n      return this.props.invert ? 'top' : 'bottom';\n    } // Defaults to 'horizontal'\n\n\n    return this.props.invert ? 'left' : 'right';\n  };\n\n  _proto.sizeKey = function sizeKey() {\n    if (this.props.orientation === 'vertical') {\n      return 'clientHeight';\n    } // Defaults to 'horizontal'\n\n\n    return 'clientWidth';\n  };\n\n  _proto.trimAlignValue = function trimAlignValue(val, props) {\n    return this.alignValue(this.trimValue(val, props), props);\n  };\n\n  _proto.trimValue = function trimValue(val, props) {\n    if (props === void 0) {\n      props = this.props;\n    }\n\n    var trimmed = val;\n\n    if (trimmed <= props.min) {\n      trimmed = props.min;\n    }\n\n    if (trimmed >= props.max) {\n      trimmed = props.max;\n    }\n\n    return trimmed;\n  };\n\n  _proto.alignValue = function alignValue(val, props) {\n    if (props === void 0) {\n      props = this.props;\n    }\n\n    var valModStep = (val - props.min) % props.step;\n    var alignValue = val - valModStep;\n\n    if (Math.abs(valModStep) * 2 >= props.step) {\n      alignValue += valModStep > 0 ? props.step : -props.step;\n    }\n\n    return parseFloat(alignValue.toFixed(5));\n  };\n\n  _proto.fireChangeEvent = function fireChangeEvent(event) {\n    if (this.props[event]) {\n      this.props[event](undoEnsureArray(this.state.value));\n    }\n  };\n\n  _proto.buildThumbStyle = function buildThumbStyle(offset, i) {\n    var style = {\n      position: 'absolute',\n      touchAction: 'none',\n      willChange: this.state.index >= 0 ? this.posMinKey() : '',\n      zIndex: this.state.zIndices.indexOf(i) + 1\n    };\n    style[this.posMinKey()] = offset + \"px\";\n    return style;\n  };\n\n  _proto.buildTrackStyle = function buildTrackStyle(min, max) {\n    var obj = {\n      position: 'absolute',\n      willChange: this.state.index >= 0 ? this.posMinKey() + \",\" + this.posMaxKey() : ''\n    };\n    obj[this.posMinKey()] = min;\n    obj[this.posMaxKey()] = max;\n    return obj;\n  };\n\n  _proto.renderThumbs = function renderThumbs(offset) {\n    var length = offset.length;\n    var styles = this.tempArray;\n\n    for (var i = 0; i < length; i += 1) {\n      styles[i] = this.buildThumbStyle(offset[i], i);\n    }\n\n    var res = [];\n\n    for (var _i = 0; _i < length; _i += 1) {\n      res[_i] = this.renderThumb(styles[_i], _i);\n    }\n\n    return res;\n  };\n\n  _proto.renderTracks = function renderTracks(offset) {\n    var tracks = [];\n    var lastIndex = offset.length - 1;\n    tracks.push(this.renderTrack(0, 0, offset[0]));\n\n    for (var i = 0; i < lastIndex; i += 1) {\n      tracks.push(this.renderTrack(i + 1, offset[i], offset[i + 1]));\n    }\n\n    tracks.push(this.renderTrack(lastIndex + 1, offset[lastIndex], this.state.upperBound));\n    return tracks;\n  };\n\n  _proto.render = function render() {\n    var _this2 = this;\n\n    var offset = this.tempArray;\n    var value = this.state.value;\n    var l = value.length;\n\n    for (var i = 0; i < l; i += 1) {\n      offset[i] = this.calcOffset(value[i], i);\n    }\n\n    var tracks = this.props.withTracks ? this.renderTracks(offset) : null;\n    var thumbs = this.renderThumbs(offset);\n    return React.createElement('div', {\n      ref: function ref(r) {\n        _this2.slider = r;\n      },\n      style: {\n        position: 'relative'\n      },\n      className: this.props.className + (this.props.disabled ? ' disabled' : ''),\n      onMouseDown: this.onSliderMouseDown,\n      onClick: this.onSliderClick\n    }, tracks, thumbs);\n  };\n\n  return ReactSlider;\n}(React.Component);\n\nReactSlider.displayName = 'ReactSlider';\nReactSlider.defaultProps = {\n  min: 0,\n  max: 100,\n  step: 1,\n  pageFn: function pageFn(step) {\n    return step * 10;\n  },\n  minDistance: 0,\n  defaultValue: 0,\n  orientation: 'horizontal',\n  className: 'slider',\n  thumbClassName: 'thumb',\n  thumbActiveClassName: 'active',\n  trackClassName: 'track',\n  withTracks: true,\n  pearling: false,\n  disabled: false,\n  snapDragDisabled: false,\n  invert: false,\n  renderThumb: function renderThumb(props) {\n    return /*#__PURE__*/React.createElement(\"div\", _extends({}, props, {\n      __self: ReactSlider,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 284,\n        columnNumber: 31\n      }\n    }));\n  },\n  renderTrack: function renderTrack(props) {\n    return /*#__PURE__*/React.createElement(\"div\", _extends({}, props, {\n      __self: ReactSlider,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 285,\n        columnNumber: 31\n      }\n    }));\n  }\n};\nexport default ReactSlider;","import styled from \"@emotion/styled\";\n\nexport default styled.div`\n  margin-bottom: 35px;\n`;\n","import styled from \"@emotion/styled\";\n\nexport default styled.label`\n  color: #222;\n  display: block;\n  font-size: 15px;\n  font-weight: normal;\n  letter-spacing: 0.5px;\n  line-height: 2.2;\n`;\n","import React from \"react\";\nimport ReactSlider from \"react-slider\";\n\nimport { css } from \"@emotion/core\";\nimport styled from \"@emotion/styled\";\n\nimport FilterControl from \"./FilterControl\";\nimport Label from \"./Label\";\n\nconst RangeFilterWrap = styled.div`\n  display: flex;\n  flex-flow: row wrap;\n  justify-content: space-around;\n`;\n\nconst StyledSlider = styled(ReactSlider)`\n  flex: 1 100%;\n  height: 32px;\n  width: 100%;\n`;\n\nconst StyledThumb = styled.div`\n  background-color: #fff;\n  border: 1px solid rgba(0, 0, 0, 0.54);\n  border-radius: 50%;\n  cursor: grab;\n  height: 2rem;\n  left: -1rem;\n  position: relative;\n  top: 0;\n  transition: transform 0.3s ease-in-out;\n  width: 2rem;\n  z-index: 1;\n\n  &.dragging {\n    transform: scale(1.25);\n  }\n`;\n\nfunction Thumb(props: object): JSX.Element {\n  return (\n    <StyledThumb {...props} /> // eslint-disable-line react/jsx-props-no-spreading\n  );\n}\n\nconst StyledTrack = styled.div`\n  background: rgba(0, 0, 0, 0.06);\n  border-bottom: solid 0.5rem #fff;\n  border-top: solid 0.5rem #fff;\n  height: 2rem;\n  margin: auto 0.8rem;\n  position: relative;\n\n  @media only screen and (min-width: 35em) {\n    border-color: #fff;\n  }\n`;\n\nfunction Track(props: object): JSX.Element {\n  return (\n    <StyledTrack {...props} /> // eslint-disable-line react/jsx-props-no-spreading\n  );\n}\n\nconst rangeInputMixin = css`\n  appearance: textfield;\n  background-color: #fff;\n  border: 0;\n  box-sizing: content-box;\n  color: rgba(0, 0, 0, 0.54);\n  font-family: system-ui, -apple-system, BlinkMacSystemFont, \"Segoe UI\", Roboto,\n    \"Helvetica Neue\", Arial, sans-serif;\n  font-size: 14px;\n  line-height: 1.2rem;\n  padding: 0;\n  width: 25%;\n  &::-webkit-inner-spin-button {\n    appearance: none;\n    margin: 0;\n  }\n  width: 3rem;\n  @media (min-width: 50em) {\n    height: 1.4rem;\n    line-height: 1.4rem;\n  }\n`;\n\nconst RangeInputMin = styled.input`\n  ${rangeInputMixin}\n  margin-right: auto;\n`;\n\nconst RangeInputMax = styled.input`\n  ${rangeInputMixin}\n  align-self: flex-start;\n  text-align: right;\n`;\n\ninterface RangeFilterProps {\n  label: string;\n  min: number;\n  max: number;\n  handleChange(value: number[]): void;\n}\n\nexport default function RangeFilter({\n  label,\n  min,\n  max,\n  handleChange,\n}: RangeFilterProps): JSX.Element {\n  const initialState = [min, max];\n\n  const [state, setState] = React.useState(initialState.slice());\n\n  const valuesAreValid = (values: number[]): boolean => {\n    return (\n      values[0] < values[1] &&\n      values[0] >= initialState[0] &&\n      values[1] <= initialState[1]\n    );\n  };\n\n  const handleSliderChange = (\n    values: number | number[] | null | undefined\n  ): void => {\n    if (!Array.isArray(values)) {\n      return;\n    }\n    setState(values);\n    handleChange(values);\n  };\n\n  const handleMinChange = (value: string): void => {\n    const newState = [parseInt(value, 10), state[1]];\n    setState(newState);\n\n    if (valuesAreValid(newState)) {\n      handleChange(newState);\n    }\n  };\n\n  const handleMaxChange = (value: string): void => {\n    const newState = [state[0], parseInt(value, 10)];\n    setState(newState);\n\n    if (valuesAreValid(newState)) {\n      handleChange(newState);\n    }\n  };\n\n  return (\n    <FilterControl>\n      <Label htmlFor={label}>{label}</Label>\n      <RangeFilterWrap>\n        <StyledSlider\n          value={state}\n          max={max}\n          min={min}\n          renderTrack={Track}\n          renderThumb={Thumb}\n          onAfterChange={handleSliderChange}\n          thumbActiveClassName=\"dragging\"\n        />\n        <RangeInputMin\n          type=\"number\"\n          value={state[0]}\n          min={min}\n          max={max}\n          step=\"1\"\n          onChange={(e): void => handleMinChange(e.target.value)}\n          className=\"filter-numeric min\"\n        />\n        <RangeInputMax\n          type=\"number\"\n          value={state[1]}\n          min={min}\n          max={max}\n          onChange={(e): void => handleMaxChange(e.target.value)}\n          step=\"1\"\n          className=\"filter-numeric max\"\n        />\n      </RangeFilterWrap>\n    </FilterControl>\n  );\n}\n","import styled from \"@emotion/styled\";\n\nexport default styled.select`\n  appearance: none;\n  backface-visibility: hidden;\n  background-color: transparent;\n  border: 0;\n  border-radius: 0;\n  box-sizing: border-box;\n  color: var(--color-secondary);\n  display: block;\n  font-family: var(--font-family-system);\n  font-size: 15px;\n  padding: 0;\n  text-indent: 0.01px;\n  text-overflow: \"\";\n  width: 100%;\n`;\n","import React from \"react\";\n\nimport FilterControl from \"./FilterControl\";\nimport Label from \"./Label\";\nimport SelectInput from \"./SelectInput\";\n\ninterface SelectFilterProps {\n  label: string;\n  children: Array<[string, string]>;\n  onChange: (value: string) => void;\n}\n\nexport default function SelectFilter({\n  label,\n  children,\n  onChange,\n}: SelectFilterProps): JSX.Element {\n  const options = [\n    <option key=\"all\">All</option>,\n    ...children.map(([optionName, optionValue]) => {\n      return (\n        <option key={optionValue} value={optionValue}>\n          {optionName}\n        </option>\n      );\n    }),\n  ];\n\n  return (\n    <FilterControl>\n      <Label htmlFor={label}>{label}</Label>\n      <SelectInput\n        onChange={(e: React.ChangeEvent<HTMLSelectElement>): void =>\n          onChange(e.target.value)\n        }\n      >\n        {options}\n      </SelectInput>\n    </FilterControl>\n  );\n}\n","import React from \"react\";\n\nimport FilterControl from \"./FilterControl\";\nimport Label from \"./Label\";\nimport SelectInput from \"./SelectInput\";\n\ninterface SorterProps<T> {\n  label: string;\n  children: { [key: string]: (a: T, b: T) => number };\n  collection: T[];\n  onChange: (collection: T[]) => void;\n}\n\nexport const collator = new Intl.Collator(\"en\", {\n  sensitivity: \"base\",\n  ignorePunctuation: true,\n  numeric: true,\n});\n\nexport function sortStringAsc(a: string, b: string): number {\n  if (a > b) {\n    return 1;\n  }\n\n  if (a < b) {\n    return -1;\n  }\n\n  return 0;\n}\n\nexport function sortStringDesc(a: string, b: string): number {\n  return -1 * sortStringAsc(a, b);\n}\n\nexport default function Sorter<T>({\n  label,\n  children,\n  collection,\n  onChange,\n}: SorterProps<T>): JSX.Element {\n  const handleChange = (value: string): void => {\n    const comparer = children[value];\n\n    const sortedCollection = collection.sort(comparer);\n\n    onChange(sortedCollection);\n  };\n\n  return (\n    <FilterControl>\n      <Label htmlFor={label}>{label}</Label>\n      <SelectInput\n        name={label}\n        onChange={(e: React.ChangeEvent<HTMLSelectElement>): void =>\n          handleChange(e.target.value)\n        }\n      >\n        {Object.keys(children).map((optionName) => {\n          return (\n            <option key={optionName} value={optionName}>\n              {optionName}\n            </option>\n          );\n        })}\n      </SelectInput>\n    </FilterControl>\n  );\n}\n","import React from \"react\";\n\nimport styled from \"@emotion/styled\";\n\nimport FilterControl from \"./FilterControl\";\nimport Label from \"./Label\";\n\nconst TextInput = styled.input`\n  backface-visibility: hidden;\n  background-color: transparent;\n  border: 0;\n  border-radius: 0;\n  box-sizing: border-box;\n  color: var(--color-text-secondary);\n  display: block;\n  font-family: var(--font-family-system);\n  font-size: 16px;\n  padding: 0;\n  width: 100%;\n  ::placeholder {\n    color: var(--color-text-secondary);\n    font-family: var(--font-family-system);\n    font-size: 14px;\n    font-weight: normal;\n  }\n`;\n\nconst TextInputWrap = styled.div`\n  border-bottom: solid 1px var(--color-border);\n  margin-bottom: 8px;\n  padding-bottom: 7px;\n`;\n\nconst delay = (\n  func: Function,\n  wait: number,\n  ...args: unknown[]\n): NodeJS.Timeout => {\n  return setTimeout(function delayWrap() {\n    return func(...args);\n  }, wait);\n};\n\nfunction underscoreDebounce(\n  func: Function,\n  wait: number\n): (...args: unknown[]) => void {\n  let result: unknown;\n  let timeout: NodeJS.Timeout | null = null;\n\n  const later = function later(context: Function, args: unknown): void {\n    timeout = null;\n    if (args) {\n      result = func.apply(context, args);\n    }\n  };\n\n  return function debouncedFunction(...args): unknown {\n    if (timeout) {\n      clearTimeout(timeout);\n    }\n\n    timeout = delay(later, wait, null, args);\n    return result;\n  };\n}\n\ninterface TextFilterProps {\n  label: string;\n  placeholder: string;\n  handleChange(value: string): void;\n}\n\nexport default function TextFilter({\n  label,\n  placeholder,\n  handleChange,\n}: TextFilterProps): JSX.Element {\n  const debouncedHandleChange = underscoreDebounce(handleChange, 150);\n\n  return (\n    <FilterControl>\n      <Label htmlFor={label}>{label}</Label>\n      <TextInputWrap>\n        <TextInput\n          name={label}\n          placeholder={placeholder}\n          onChange={(e): void => debouncedHandleChange(e.target.value)}\n        />\n      </TextInputWrap>\n    </FilterControl>\n  );\n}\n","import { graphql } from \"gatsby\";\nimport moment from \"moment\";\nimport React from \"react\";\n\nimport styled from \"@emotion/styled\";\n\nimport Layout from \"../components/Layout\";\nimport RangeFilter from \"../components/RangeFilter\";\nimport SelectFilter from \"../components/SelectFilter\";\nimport Sorter, {\n  collator,\n  sortStringAsc,\n  sortStringDesc,\n} from \"../components/Sorter\";\nimport TextFilter from \"../components/TextFilter\";\n\ninterface Viewing {\n  sequence: number;\n  date: string;\n  imdbId: string;\n  venue: string;\n  movie: {\n    sortTitle: string;\n    title: string;\n    year: string;\n  };\n}\n\ninterface Props {\n  data: {\n    allViewing: {\n      nodes: Viewing[];\n    };\n  };\n}\n\nfunction buildSlug(node: Props[\"data\"][\"allViewing\"][\"nodes\"][0]): string {\n  return `${moment(node.date).format(\"dddd MMM D, YYYY\")} via ${node.venue}.`;\n}\n\nconst Container = styled.div`\n  border: 1px solid #eee;\n  border-left: none;\n  border-right: none;\n  transition: opacity 0.3s ease;\n\n  @media only screen and (min-width: 48em) {\n    border: none;\n    border-right: solid 1px #eee;\n  }\n`;\n\nconst Heading = styled.h2`\n  border-bottom: 1px solid var(--color-primary);\n  display: block;\n  font-size: 19px;\n  font-weight: normal;\n  margin: 0 0 20px;\n  padding: 20px;\n  position: relative;\n  text-decoration: none;\n\n  @media only screen and (min-width: 48em) {\n    padding: 20px 0;\n  }\n`;\n\nconst Content = styled.div`\n  padding: 0 20px;\n\n  @media only screen and (min-width: 48em) {\n    padding: 0 50px 20px 0;\n  }\n`;\n\ninterface ViewingSelectFilterProps {\n  label: string;\n  viewings: Viewing[];\n  onChange(filterId: string, matcher: (viewing: Viewing) => boolean): void;\n}\n\nfunction ViewingYearSelectFilter({\n  label,\n  viewings,\n  onChange,\n}: ViewingSelectFilterProps): JSX.Element {\n  const yearOptions = [\n    ...new Set(\n      viewings.map((viewing) => {\n        return viewing.date.substring(0, 4);\n      })\n    ),\n  ]\n    .sort()\n    .map((year): [string, string] => {\n      return [year, year];\n    });\n\n  const handleChange = (value: string): void => {\n    onChange(\"viewingYear\", (viewing: Viewing): boolean => {\n      if (value === \"All\") {\n        return true;\n      }\n\n      return viewing.date.startsWith(value);\n    });\n  };\n\n  return (\n    <SelectFilter onChange={handleChange} label={label}>\n      {yearOptions}\n    </SelectFilter>\n  );\n}\n\nfunction VenueFilter({\n  label,\n  viewings,\n  onChange,\n}: ViewingSelectFilterProps): JSX.Element {\n  const venues = [\n    ...new Set(\n      viewings.map((viewing) => {\n        return viewing.venue;\n      })\n    ),\n  ].sort();\n\n  const venueOptions = venues.map((venue): [string, string] => {\n    return [venue, venue];\n  });\n\n  const handleChange = (value: string): void => {\n    onChange(\"venue\", (viewing: Viewing): boolean => {\n      if (value === \"All\") {\n        return true;\n      }\n\n      return viewing.venue === value;\n    });\n  };\n\n  return (\n    <SelectFilter onChange={handleChange} label={label}>\n      {venueOptions}\n    </SelectFilter>\n  );\n}\n\nfunction escapeRegExp(str = \"\"): string {\n  return str.replace(/[-[\\]/{}()*+?.\\\\^$|]/g, \"\\\\$&\");\n}\n\ninterface TitleFilterProps {\n  label: string;\n  placeholder: string;\n  onChange(filterId: string, matcher: (viewing: Viewing) => boolean): void;\n}\n\nfunction TitleFilter({\n  label,\n  placeholder,\n  onChange,\n}: TitleFilterProps): JSX.Element {\n  const handleChange = (value: string): void => {\n    const regex = new RegExp(escapeRegExp(value), \"i\");\n    onChange(\"title\", (viewing: Viewing): boolean => {\n      return regex.test(viewing.movie.title);\n    });\n  };\n\n  return (\n    <TextFilter\n      label={label}\n      placeholder={placeholder}\n      handleChange={handleChange}\n    />\n  );\n}\n\ninterface ViewingSorterProps {\n  label: string;\n  viewings: Viewing[];\n  onChange(sortedViewings: Viewing[]): void;\n}\n\nfunction ViewingSorter({\n  label,\n  viewings,\n  onChange,\n}: ViewingSorterProps): JSX.Element {\n  const sortViewingDateAsc = (a: Viewing, b: Viewing): number => {\n    return sortStringAsc(a.date, b.date);\n  };\n\n  const sortViewingDateDesc = (a: Viewing, b: Viewing): number => {\n    return sortStringDesc(a.date, b.date);\n  };\n\n  const sortReleaseDateAsc = (a: Viewing, b: Viewing): number => {\n    return sortStringAsc(a.movie.year, b.movie.year);\n  };\n\n  const sortReleaseDateDesc = (a: Viewing, b: Viewing): number => {\n    return sortStringDesc(a.movie.year, b.movie.year);\n  };\n\n  const sortTitleAsc = (a: Viewing, b: Viewing): number => {\n    return collator.compare(a.movie.sortTitle, b.movie.sortTitle);\n  };\n\n  const handleChange = (sortViewings: Viewing[]): void => {\n    onChange(sortViewings);\n  };\n\n  return (\n    <Sorter<Viewing>\n      label={label}\n      collection={viewings}\n      onChange={handleChange}\n    >\n      {{\n        \"Viewing Date (Newest First)\": sortViewingDateDesc,\n        \"Viewing Date (Oldest First)\": sortViewingDateAsc,\n        \"Release Date (Newest First)\": sortReleaseDateDesc,\n        \"Release Date (Oldest First)\": sortReleaseDateAsc,\n        Title: sortTitleAsc,\n      }}\n    </Sorter>\n  );\n}\n\ninterface ViewingListItem extends Viewing {\n  match: boolean;\n}\n\ninterface FilterPanelProps {\n  state: {\n    viewings: ViewingListItem[];\n    ids: number[];\n  };\n  setState(state: { viewings: ViewingListItem[]; ids: number[] }): void;\n  heading: string;\n}\n\nconst matchers: { [key: string]: (viewing: Viewing) => boolean } = {};\n\nfunction FilterPanel({\n  state,\n  setState,\n  heading,\n}: FilterPanelProps): JSX.Element {\n  const onFilterChange = (\n    filterId: string,\n    matcher: (viewing: Viewing) => boolean\n  ): void => {\n    matchers[filterId] = matcher;\n\n    const viewings = state.viewings.map((viewing) => {\n      const match = !Object.values(matchers).some((filterMatcher) => {\n        return !filterMatcher(viewing);\n      });\n\n      return { ...viewing, match };\n    });\n\n    setState({ ...state, viewings });\n  };\n\n  const onSortChange = (sortedViewings: ViewingListItem[]): void => {\n    setState({ ...state, viewings: sortedViewings });\n  };\n\n  return (\n    <Container>\n      <Heading>{heading}</Heading>\n      <Content>\n        <TitleFilter\n          onChange={onFilterChange}\n          label=\"Title\"\n          placeholder=\"Enter all or part of a title.\"\n        />\n        <ReleaseYearFilter\n          label=\"Release Year\"\n          viewings={state.viewings}\n          onChange={onFilterChange}\n        />\n        <ViewingYearSelectFilter\n          label=\"Viewing Year\"\n          viewings={state.viewings}\n          onChange={onFilterChange}\n        />\n        <VenueFilter\n          label=\"Venue\"\n          viewings={state.viewings}\n          onChange={onFilterChange}\n        />\n        <ViewingSorter\n          label=\"Order By\"\n          viewings={state.viewings}\n          onChange={onSortChange}\n        />\n      </Content>\n    </Container>\n  );\n}\n\ninterface ReleaseYearFilterProps {\n  label: string;\n  viewings: Viewing[];\n  onChange(filterId: string, matcher: (viewing: Viewing) => boolean): void;\n}\n\nfunction ReleaseYearFilter({\n  label,\n  viewings,\n  onChange,\n}: ReleaseYearFilterProps): JSX.Element {\n  const releaseYears = viewings\n    .map((viewing) => {\n      return viewing.movie.year;\n    })\n    .sort();\n\n  const minYear = parseInt(releaseYears[0], 10);\n  const maxYear = parseInt(releaseYears[releaseYears.length - 1], 10);\n\n  const handleChange = (values: number[]): void => {\n    onChange(\"releaseYear\", (viewing: Viewing): boolean => {\n      if (values === [minYear, maxYear]) {\n        return true;\n      }\n\n      const value = parseInt(viewing.movie.year, 10);\n      return value >= values[0] && value <= values[1];\n    });\n  };\n\n  return (\n    <RangeFilter\n      label={label}\n      min={minYear}\n      max={maxYear}\n      handleChange={handleChange}\n    />\n  );\n}\n\nconst PanelHeaderHeader = styled.header`\n  padding: 20px;\n\n  @media only screen and (min-width: 48em) {\n    padding: 10px 0 20px;\n    text-align: left;\n  }\n\n  @media only screen and (min-width: 71.24em) {\n    padding-top: 0;\n  }\n`;\n\nconst PanelHeaderHeading = styled.h1`\n  line-height: 60px;\n  margin-bottom: 0;\n`;\n\nconst PanelHeaderSlug = styled.div`\n  color: rgba(0, 0, 0, 0.54);\n  font-size: 15px;\n  line-height: 20px;\n  margin-bottom: 0;\n`;\n\ninterface PanelHeaderProps {\n  title: string;\n  slug: string;\n}\n\nfunction PanelHeader({ title, slug }: PanelHeaderProps): JSX.Element {\n  return (\n    <PanelHeaderHeader>\n      <PanelHeaderHeading>{title}</PanelHeaderHeading>\n      <PanelHeaderSlug>{slug}</PanelHeaderSlug>\n    </PanelHeaderHeader>\n  );\n}\n\nconst List = styled.ol`\n  margin: 0 0 35px;\n  padding: 0;\n`;\n\nconst ListItem = styled.li`\n  font-weight: normal;\n  list-style-type: none;\n  padding: 0;\n  position: relative;\n\n  &:after {\n    background-color: #eee;\n    bottom: 0;\n    content: \"\";\n    display: block;\n    height: 1px;\n    left: 20px;\n    margin: 0;\n    position: absolute;\n    right: 0;\n  }\n`;\n\ninterface ViewingListItemProps {\n  viewing: ViewingListItem;\n}\n\nconst ViewingListItem = React.memo(function ViewingListItem({\n  viewing,\n}: ViewingListItemProps): JSX.Element {\n  const style = viewing.match ? undefined : { display: \"none\" };\n\n  return (\n    <ListItem style={style}>\n      <Title>\n        {viewing.movie.title} ({viewing.movie.year})\n      </Title>\n      <Slug>{buildSlug(viewing)}</Slug>\n    </ListItem>\n  );\n});\n\nconst Title = styled.div`\n  display: block;\n  font-size: 18px;\n  line-height: 40px;\n  overflow: hidden;\n  padding: 20px 20px 0;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n`;\n\nconst Slug = styled.div`\n  color: rgba(0, 0, 0, 0.38);\n  font-size: 15px;\n  line-height: 20px;\n  padding: 0 20px 20px;\n  text-rendering: optimizeLegibility;\n`;\n\nconst ColumnWrap = styled.div`\n  @media only screen and (min-width: 48em) {\n    border-top: solid 1px #eee;\n    display: flex;\n    margin: 0 auto;\n    width: 700px;\n  }\n  @media only screen and (min-width: 71.24em) {\n    width: 900px;\n  }\n`;\n\nconst Column1 = styled.div`\n  @media only screen and (min-width: 48em) {\n    width: 250px;\n  }\n\n  @media only screen and (min-width: 71.24em) {\n    width: 340px;\n  }\n`;\n\nconst Column2 = styled.div`\n  @media only screen and (min-width: 48em) {\n    padding-left: 30px;\n    width: 420px;\n  }\n\n  @media only screen and (min-width: 71.24em) {\n    width: 540px;\n  }\n`;\n\ninterface TwoColumnsProps {\n  children: React.ReactNode;\n}\n\nfunction TwoColumns({ children }: TwoColumnsProps): JSX.Element {\n  return <ColumnWrap>{children}</ColumnWrap>;\n}\n\nexport default function Viewings({ data }: Props): JSX.Element {\n  const viewings = data.allViewing.nodes.map((node) => {\n    return { ...node, match: true };\n  });\n\n  const ids = data.allViewing.nodes.map((node) => {\n    return node.sequence;\n  });\n\n  const [state, setState] = React.useState({ viewings, ids });\n\n  return (\n    <Layout>\n      <PanelHeader\n        title=\"Viewing Log\"\n        slug={`I've watched ${data.allViewing.nodes.length} movies since 2012`}\n      />\n      <TwoColumns>\n        <Column1>\n          <FilterPanel\n            state={state}\n            setState={setState}\n            heading=\"Filter and Sort\"\n          />\n        </Column1>\n        <Column2>\n          <List id=\"viewings\">\n            {state.viewings.map((viewing) => (\n              <ViewingListItem\n                key={`${viewing.sequence}-${viewing.imdbId}`}\n                viewing={viewing}\n              />\n            ))}\n          </List>\n        </Column2>\n      </TwoColumns>\n    </Layout>\n  );\n}\n\nexport const query = graphql`\n  query {\n    allViewing(sort: { fields: [sequence], order: DESC }) {\n      nodes {\n        sequence\n        date(formatString: \"YYYY-MM-DD\")\n        imdbId\n        venue\n        movie {\n          sortTitle\n          title\n          year\n        }\n      }\n    }\n  }\n`;\n","// 21.1.3.18 String.prototype.startsWith(searchString [, position ])\n'use strict';\nvar $export = require('./_export');\nvar toLength = require('./_to-length');\nvar context = require('./_string-context');\nvar STARTS_WITH = 'startsWith';\nvar $startsWith = ''[STARTS_WITH];\n\n$export($export.P + $export.F * require('./_fails-is-regexp')(STARTS_WITH), 'String', {\n  startsWith: function startsWith(searchString /* , position = 0 */) {\n    var that = context(this, searchString, STARTS_WITH);\n    var index = toLength(Math.min(arguments.length > 1 ? arguments[1] : undefined, that.length));\n    var search = String(searchString);\n    return $startsWith\n      ? $startsWith.call(that, search, index)\n      : that.slice(index, index + search.length) === search;\n  }\n});\n","// https://github.com/tc39/proposal-object-values-entries\nvar $export = require('./_export');\nvar $values = require('./_object-to-array')(false);\n\n$export($export.S, 'Object', {\n  values: function values(it) {\n    return $values(it);\n  }\n});\n","var DESCRIPTORS = require('./_descriptors');\nvar getKeys = require('./_object-keys');\nvar toIObject = require('./_to-iobject');\nvar isEnum = require('./_object-pie').f;\nmodule.exports = function (isEntries) {\n  return function (it) {\n    var O = toIObject(it);\n    var keys = getKeys(O);\n    var length = keys.length;\n    var i = 0;\n    var result = [];\n    var key;\n    while (length > i) {\n      key = keys[i++];\n      if (!DESCRIPTORS || isEnum.call(O, key)) {\n        result.push(isEntries ? [key, O[key]] : O[key]);\n      }\n    }\n    return result;\n  };\n};\n"],"sourceRoot":""}